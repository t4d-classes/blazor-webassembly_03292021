@page "/car-tool"

@using ToolsAppDemo.Shared

<ToolHeader HeaderText="Car Tool" />
<CarTable Cars=@cars EditCarId=@editCarId
          OnEditCar=@editCar OnDeleteCar=@deleteCar />
<CarForm ButtonText="Add Car" OnSubmitCar="addCar" />
<ToolFooter CompanyName="A Cool Company, Inc." />

@code {
  private List<Car> cars = new List<Car>() {
    new Car() {
      Id=1, Make="Ford",
      Model="Fusion Hybrid", Year=2020,
      Color="red", Price=45000
    },
    new Car() {
      Id=2, Make="Tesla",
      Model="S", Year=2019,
      Color="blue", Price=120000
    },
  };

  private long editCarId { get; set; } = -1;

  private void addCar(Car car) {
    car.Id = cars.Max(c => c.Id) + 1;
    cars.Add(car);
  }

  private void deleteCar(long carId)
  {
    var car = cars.Find(c => c.Id == carId);
    cars.Remove(car);
  }

  private void editCar(long carId)
  { 
    editCarId = carId
  }

}